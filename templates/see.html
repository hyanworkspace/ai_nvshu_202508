<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 女书</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
    <link href="{{ url_for('static', filename='css/globals.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/nvshu_rain.css') }}" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body data-component="page-body">
    <!-- Reusable Nvshu background -->
    <div id="nvshu-rain" class="nvshu-rain-container"></div>
    <div class="relative w-screen h-screen bg-transparent text-white overflow-hidden" data-component="page-container">

        <!-- Main content -->
        <div class="relative z-10 h-full w-full flex flex-row items-center justify-center" data-component="main-content">
            <!-- Circles Container for symmetrical alignment -->
            <div class="flex flex-row items-center justify-center gap-[min(60px,3vw)] w-full max-w-[1920px] px-[min(60px,3vw)]" data-component="circles-container">
                <!-- Video Recording Circle -->
                <div class="relative group w-[25vw] max-w-[640px]" id="recordOption" data-component="video-recording-circle">
                    <div class="aspect-square w-full rounded-full bg-[radial-gradient(circle_at_center,rgba(255,251,233,0.9)_70%,rgba(255,251,233,0)_100%)] flex flex-col items-center justify-center cursor-pointer transition-transform transform hover:scale-105" data-component="recording-circle-container">
                        <!-- Inner dotted circle -->
                        <div class="absolute w-[86.7%] h-[86.7%] rounded-full border-[3px] border-dotted border-black rotating-border" data-component="dotted-border"></div>
                        <div class="mb-1 w-[min(100px,20%)] h-[min(100px,20%)] relative" data-component="camera-icon-container">
                            <img src="{{ url_for('static', filename='images/cameraIcon.png') }}"
                                 alt="Camera icon"
                                 class="w-full h-full object-contain">
                        </div>
                        <p class="text-gray-700 text-center text-[min(1.2rem,1.6vw)] leading-none font-medium" data-component="recording-text">Click to record a video</p>
                        
                        <!-- 录制时显示的视频预览 -->
                            <video id="recordPreview" autoplay muted playsinline 
                                class="hidden w-full h-full absolute inset-0 rounded-full object-cover" data-component="record-preview"></video>
                        
                        <!-- 录制控制按钮 -->
                        <div class="record-controls hidden absolute bottom-5 z-20 flex gap-2" data-component="record-controls">
                            <button id="startRecordBtn" class="bg-primary/80 hover:bg-primary text-black px-4 py-2 rounded-full text-sm" data-component="start-record-btn">Start Recording</button>
                            <button id="stopRecordBtn" class="hidden bg-red-500/80 hover:bg-red-500 text-white px-4 py-2 rounded-full text-sm" data-component="stop-record-btn">Stop Recording</button>
                        </div>
                    </div>
                </div>

                <!-- File Upload Circle -->
                <div class="relative group w-[25vw] max-w-[640px]" id="uploadOption" data-component="file-upload-circle">
                    <div class="aspect-square w-full rounded-full bg-[radial-gradient(circle_at_center,rgba(255,251,233,0.9)_70%,rgba(255,251,233,0)_100%)] flex flex-col items-center justify-center cursor-pointer transition-transform transform hover:scale-105" data-component="upload-circle-container">
                        <!-- Inner dotted circle -->
                        <div class="absolute w-[86.7%] h-[86.7%] rounded-full border-[3px] border-dotted border-black rotating-border" data-component="upload-dotted-border"></div>
                        <div class="mb-1 w-[min(100px,20%)] h-[min(100px,20%)] relative" data-component="upload-icon-container">
                            <img src="{{ url_for('static', filename='images/uploadImageIcon.png') }}"
                                 alt="Upload icon"
                                 class="w-full h-full object-contain">
                        </div>
                        <p class="text-gray-700 text-center text-[min(1.2rem,1.6vw)] leading-none font-medium" data-component="upload-text">Drag to here or browse files</p>
                        <div class="space-y-0" data-component="format-info">
                            <p class="text-gray-500 text-[min(0.7rem,1.2vw)] mt-1 font-light leading-none">Supported format:</p>
                            <p class="text-gray-500 text-[min(0.7rem,1.2vw)] font-light leading-none">MP4, PNG, JPG</p>
                            <p class="text-gray-500 text-[min(0.7rem,1.2vw)] font-light leading-none">(Max 5mb each)</p>
                        </div>
                        <input type="file" id="fileInput" accept="video/mp4,image/png,image/jpeg" class="hidden" data-component="file-input">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 隐藏的视频录制元素 -->
    <video id="videoRecorder" autoplay muted class="hidden aspect-video"></video>


    <!-- 确认页面 -->
    <div class="fixed inset-0 bg-transparent text-white overflow-hidden font-inknut hidden" id="confirmationPage" data-component="confirmation-page">

        <!-- Main content -->
        <div class="relative z-10 h-full w-full flex flex-col items-center justify-center" data-component="confirmation-main-content">
            <!-- Privacy statement -->
            <p class="text-center text-[min(1.2rem,1.6vw)] mb-6 text-[rgb(255,251,233)]" data-component="privacy-statement">
                By uploading, you agree to our Privacy & Data Usage Statement
            </p>

            <!-- Preview Circle -->
            <div class="relative w-[25vw] max-w-[640px] mb-10" id="previewContainer" data-component="preview-container">
                <div class="aspect-square w-full rounded-full bg-[rgba(255,251,233,0.9)] flex items-center justify-center overflow-hidden" data-component="preview-circle">
                    <!-- Inner dotted circle -->
                    <div class="absolute w-[86.7%] h-[86.7%] rounded-full border-[3px] border-dotted border-black rotating-border" data-component="preview-dotted-border"></div>

                    <!-- Video preview -->
                    <!-- <video id="videoPreview" autoplay loop class="w-full h-full absolute inset-0 rounded-full object-cover mix-blend-exclusion"></video> -->
                    <video id="videoPreview" autoplay loop class="w-full h-full absolute inset-0 rounded-full object-cover" data-component="video-preview"></video>
                </div>
            </div>

            <!-- Action buttons -->
            <div class="flex flex-row justify-between w-full max-w-[40vw] mt-4" data-component="action-buttons">
                <div data-component="re-upload-button-container">
                    <button id="reUploadBtn" class="w-full max-w-[20vw] px-10 py-2 rounded-[30px] border-[3px] border-dashed border-[rgb(255,251,233)] bg-[rgba(255,251,233,0.4)] text-[rgb(255,251,233)] font-inknut" style="padding: 0.1rem 1rem; width: 100%;" data-component="re-upload-btn">
                        Re-Upload
                    </button>
                </div>
                <div data-component="confirm-button-container">
                    <button id="confirmBtn" class="w-full max-w-[20vw] px-10 py-2 rounded-[30px] border-[3px] border-dashed border-[rgb(255,251,233)] bg-[rgba(255,251,233,0.4)] text-[rgb(255,251,233)] font-inknut" style="padding: 0.1rem 1rem; width: 100%;" data-component="confirm-btn">
                        Confirm
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 隐私政策弹窗 -->
    <div id="privacyPolicy" class="fixed inset-0 z-50 hidden flex items-center justify-center" data-component="privacy-policy-modal">
        <!-- 半透明背景 -->
        <div class="absolute inset-0 bg-black bg-opacity-50" data-component="modal-backdrop"></div>
        
        <!-- 弹窗内容 -->
        <div class="relative z-10 w-[600px] bg-[rgba(0,0,0,0.8)] rounded-[30px] border-[3px] border-dashed border-[rgb(255,251,233)] overflow-hidden" data-component="modal-content">
            <!-- 标题和内容区域 -->
            <div class="max-h-[300px] overflow-y-auto px-8 py-6 text-[rgb(255,251,233)] custom-scrollbar" data-component="modal-body">
                <h3 class="text-xl font-medium mb-4" data-component="modal-title">Privacy & Data Usage Statement</h3>
                <p class="text-sm leading-relaxed" data-component="modal-text">
                    We respect your privacy and are committed to protecting your personal information. When you upload an image or video for this interactive experience, your content is used solely for generating the artistic response. We do not store or share your content with third parties, and all uploaded content is automatically deleted after processing. No personal identification information is collected.
                </p>
            </div>
            
            <!-- 按钮容器 -->
            <div class="border-t border-[rgb(255,251,233)] border-opacity-20 px-8 py-4 flex justify-center" data-component="modal-footer">
                <button id="agreeBtn" class="w-full max-w-[20vw] px-10 py-2 rounded-[30px] border-[3px] border-dashed border-[rgb(255,251,233)] bg-[rgba(255,251,233,0.4)] text-[rgb(255,251,233)] font-inknut" style="padding: 0.1rem 1rem;" data-component="agree-btn">
                    Yes, I agree!
                </button>
            </div>
        </div>
    </div>

    <style>
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 251, 233, 0.1);
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 251, 233, 0.3);
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 251, 233, 0.5);
        }
    </style>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/see.js') }}"></script>
    <script src="{{ url_for('static', filename='js/components/NvshuRain.js') }}"></script>
</body>
</html>
