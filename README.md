# AIå¥³ä¹¦ Web App

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://python.org)
[![Flask](https://img.shields.io/badge/Flask-3.1.0-green.svg)](https://flask.palletsprojects.com)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## é¡¹ç›®æ¦‚è¿°

AIå¥³ä¹¦æ˜¯ä¸€ä¸ªåŸºäºäººå·¥æ™ºèƒ½çš„å¥³ä¹¦å­—ç¬¦ç”Ÿæˆå’Œè¯—æ­Œåˆ›ä½œWebåº”ç”¨ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ä¸Šä¼ è§†é¢‘æˆ–å›¾ç‰‡ï¼Œè®©AIåˆ†æå†…å®¹å¹¶ç”Ÿæˆç›¸åº”çš„å¥³ä¹¦å­—ç¬¦ï¼Œä½“éªŒå®Œæ•´çš„å¥³ä¹¦æ–‡åŒ–äº¤äº’æµç¨‹ã€‚

### âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸ¥ **å¤šåª’ä½“ä¸Šä¼ **: æ”¯æŒè§†é¢‘(MP4/WebM)å’Œå›¾ç‰‡(PNG/JPG)ä¸Šä¼ 
- ğŸ¤– **AIå†…å®¹åˆ†æ**: ä½¿ç”¨æ™ºè°±AIè¿›è¡Œæ™ºèƒ½å†…å®¹è¯†åˆ«å’Œæè¿°
- ğŸ“ **è¯—æ­Œç”Ÿæˆ**: åŸºäºåˆ†æç»“æœè‡ªåŠ¨ç”Ÿæˆä¸­æ–‡è¯—æ­Œ
- ğŸ”¤ **å¥³ä¹¦å­—ç¬¦ç”Ÿæˆ**: å°†è¯—æ­Œä¸­çš„å­—ç¬¦è½¬æ¢ä¸ºå¥³ä¹¦ç¬¦å·
- ğŸ® **äº’åŠ¨çŒœæµ‹**: ç”¨æˆ·çŒœæµ‹å¥³ä¹¦å­—ç¬¦å«ä¹‰çš„è¶£å‘³ä½“éªŒ
- ğŸ“š **å­—å…¸ç®¡ç†**: ç”¨æˆ·è´¡çŒ®çš„å­—ç¬¦å¯å­˜å‚¨åˆ°å…¬å…±å­—å…¸
- ğŸŒ **åŒè¯­æ”¯æŒ**: å®Œæ•´çš„ä¸­è‹±æ–‡å¯¹ç…§ä½“éªŒ

### ğŸ¯ æŠ€æœ¯ç‰¹è‰²

- **å‰ç«¯**: HTML5 + CSS3 + JavaScript + GSAPåŠ¨ç”»
- **åç«¯**: Flask + Python 3.10+
- **AIæ¨¡å‹**: æ™ºè°±AI (GLM-4V + GLM-4)
- **æœºå™¨å­¦ä¹ **: PyTorch + Transformers + BERT
- **å›¾åƒå¤„ç†**: OpenCV + PIL + MoviePy
- **æ–‡æœ¬å¤„ç†**: Jiebaåˆ†è¯ + Gensimè¯å‘é‡

## æ ¸å¿ƒç»„ä»¶ç»“æ„

### 1. åç«¯æ ¸å¿ƒæ–‡ä»¶
- **app.py** - Flaskä¸»åº”ç”¨ï¼ŒåŒ…å«æ‰€æœ‰è·¯ç”±å’ŒAPIç«¯ç‚¹
- **config.py** - é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«æ¨¡å‹å‚æ•°ã€è·¯å¾„ç­‰
- **ai_nvshu_functions.py** - æ ¸å¿ƒAIåŠŸèƒ½å‡½æ•°
- **utils.py** - å·¥å…·å‡½æ•°ï¼ŒåŒ…å«å‘é‡å¤„ç†ã€é”™è¯¯å¤„ç†ç­‰
- **word_vector_manager.py** - è¯å‘é‡ç®¡ç†å™¨
- **media_analysis.py** - åª’ä½“åˆ†ææ¨¡å—
- **process_video.py** - è§†é¢‘å¤„ç†å·¥å…·
- **dict_io.py** - å­—å…¸è¯»å†™æ“ä½œ

### 2. å‰ç«¯æ–‡ä»¶
- **templates/** - HTMLæ¨¡æ¿
- **static/** - é™æ€èµ„æºï¼ˆCSSã€JSã€å›¾ç‰‡ã€å­—ä½“ï¼‰

### 3. çŸ¥è¯†åº“æ–‡ä»¶
- **knowledge_base/** - é¢„è®­ç»ƒæ•°æ®å’Œæ¨¡å‹æ–‡ä»¶
- **knowledge_tmp/** - ä¸´æ—¶çŸ¥è¯†åº“æ–‡ä»¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- **Python**: 3.10+ (æ¨è 3.11)
- **FFmpeg**: ç”¨äºè§†é¢‘å¤„ç† (å¯é€‰ï¼Œä»…è§†é¢‘åŠŸèƒ½éœ€è¦)
- **å†…å­˜**: è‡³å°‘ 4GB RAM (AIæ¨¡å‹åŠ è½½éœ€è¦)
- **å­˜å‚¨**: è‡³å°‘ 2GB å¯ç”¨ç©ºé—´

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd ai_nvshu
```

#### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ (æ¨è)
```bash
# ä½¿ç”¨ venv
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate     # Windows

# æˆ–ä½¿ç”¨ conda
conda create -n nvshu python=3.11
conda activate nvshu
```

#### 3. å®‰è£…ä¾èµ–

**æ¨èä½¿ç”¨** (åŒ…å«æ‰€æœ‰åŠŸèƒ½ï¼Œå»é™¤éå¿…è¦åŒ…):
```bash
pip install -r requirements-minimal.txt
```

**å®Œæ•´ç‰ˆæœ¬** (åŒ…å«æ‰€æœ‰ä¾èµ–ï¼ŒåŒ…æ‹¬å¼€å‘å·¥å…·):
```bash
pip install -r requirements.txt
```

#### 4. é…ç½®ç¯å¢ƒå˜é‡
åˆ›å»º `.env` æ–‡ä»¶å¹¶æ·»åŠ APIå¯†é’¥:
```bash
# æ™ºè°±AI APIå¯†é’¥ (å¿…éœ€)
ZHIPU_API_KEY=your_zhipu_api_key_here

# å¯é€‰é…ç½®
USE_MOCK_AI=false  # æ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
```

#### 5. è¿è¡Œåº”ç”¨
```bash
python app.py
```

#### 6. è®¿é—®åº”ç”¨
æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:5001`

### ğŸ”§ å¼€å‘æ¨¡å¼

å¯ç”¨è°ƒè¯•æ¨¡å¼:
```bash
export FLASK_DEBUG=1  # Linux/Mac
set FLASK_DEBUG=1     # Windows
python app.py
```

è°ƒè¯•æ¨¡å¼ä¸‹ä¼š:
- è‡ªåŠ¨é‡è½½ä»£ç å˜æ›´
- ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ® (å¦‚æœAIæœåŠ¡ä¸å¯ç”¨)
- æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯

### ğŸ”‘ APIé…ç½®

#### æ™ºè°±AIé…ç½®
1. è®¿é—® [æ™ºè°±AIå¼€æ”¾å¹³å°](https://open.bigmodel.cn/)
2. æ³¨å†Œè´¦å·å¹¶è·å–APIå¯†é’¥
3. åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®:
   ```bash
   ZHIPU_API_KEY=your_actual_api_key
   ```

#### æ¨¡å‹é…ç½®
åº”ç”¨ä½¿ç”¨ä»¥ä¸‹AIæ¨¡å‹:
- **è§†è§‰æ¨¡å‹**: `glm-4v-flash` (å›¾åƒ/è§†é¢‘åˆ†æ)
- **è¯­è¨€æ¨¡å‹**: `glm-4-flash-250414` (è¯—æ­Œç”Ÿæˆ)

### ğŸ› ï¸ æ•…éšœæ’é™¤

#### å¸¸è§é—®é¢˜

**1. AIæœåŠ¡è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
echo $ZHIPU_API_KEY

# ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®æ¨¡å¼
export USE_MOCK_AI=true
python app.py
```

**2. ä¾èµ–å®‰è£…å¤±è´¥**
```bash
# å‡çº§pip
pip install --upgrade pip

# ä½¿ç”¨å›½å†…é•œåƒæº
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

**3. å†…å­˜ä¸è¶³**
- ç¡®ä¿ç³»ç»Ÿæœ‰è‡³å°‘4GBå¯ç”¨å†…å­˜
- å…³é—­å…¶ä»–å ç”¨å†…å­˜çš„åº”ç”¨
- æ¨èä½¿ç”¨ `requirements-minimal.txt` å‡å°‘ä¾èµ–åŒ…

**4. æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
- æ£€æŸ¥ `uploads/` ç›®å½•æƒé™
- ç¡®ä¿æ–‡ä»¶å¤§å°ä¸è¶…è¿‡20MB
- æ”¯æŒæ ¼å¼: MP4, WebM, PNG, JPG, JPEG

#### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f app.log

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
python app.py --debug
```

## ğŸ“± ç”¨æˆ·ä½¿ç”¨æµç¨‹

### å®Œæ•´ä½“éªŒæµç¨‹

#### ç¬¬ä¸€æ­¥ï¼šä¸Šä¼ åª’ä½“æ–‡ä»¶
1. **è®¿é—®é¦–é¡µ** - æ‰“å¼€åº”ç”¨é¦–é¡µ (`/`)
2. **é€‰æ‹©ä¸Šä¼ æ–¹å¼**ï¼š
   - **å½•åˆ¶è§†é¢‘** - ç‚¹å‡»å½•åˆ¶æŒ‰é’®ï¼Œä½¿ç”¨æ‘„åƒå¤´å½•åˆ¶è§†é¢‘
   - **ä¸Šä¼ æ–‡ä»¶** - ç‚¹å‡»ä¸Šä¼ æŒ‰é’®ï¼Œé€‰æ‹©æœ¬åœ°è§†é¢‘æˆ–å›¾ç‰‡æ–‡ä»¶
3. **ç¡®è®¤ä¸Šä¼ ** - é¢„è§ˆæ–‡ä»¶åç‚¹å‡»ç¡®è®¤æŒ‰é’®

**æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼š**
- è§†é¢‘ï¼šMP4, WebM
- å›¾ç‰‡ï¼šPNG, JPG, JPEG
- æ–‡ä»¶å¤§å°é™åˆ¶ï¼š5MB

#### ç¬¬äºŒæ­¥ï¼šAIåˆ†æå¤„ç†
1. **è‡ªåŠ¨è·³è½¬** - ä¸Šä¼ æˆåŠŸåè‡ªåŠ¨è¿›å…¥æ€è€ƒé¡µé¢ (`/think`)
2. **AIåˆ†æ** - ç³»ç»Ÿè‡ªåŠ¨åˆ†æåª’ä½“å†…å®¹ï¼š
   - è¯†åˆ«è§†é¢‘/å›¾ç‰‡ä¸­çš„åœºæ™¯å’Œå†…å®¹
   - ç”Ÿæˆä¸­æ–‡å’Œè‹±æ–‡æè¿°
3. **æŸ¥æ‰¾ç›¸ä¼¼è¯—æ­Œ** - AIåœ¨çŸ¥è¯†åº“ä¸­æŸ¥æ‰¾ç›¸å…³çš„å¥³ä¹¦è¯—æ­Œ
4. **ç”Ÿæˆæ–°è¯—æ­Œ** - åŸºäºåˆ†æç»“æœåˆ›ä½œæ–°çš„è¯—æ­Œ

#### ç¬¬ä¸‰æ­¥ï¼šå­—ç¬¦ç”Ÿæˆä¸çŒœæµ‹
1. **è¿›å…¥çŒœæµ‹é¡µé¢** - è‡ªåŠ¨è·³è½¬åˆ°çŒœæµ‹é¡µé¢ (`/guess`)
2. **æ˜¾ç¤ºè¯—æ­Œ** - å·¦ä¾§åœ†å½¢æ˜¾ç¤ºç”Ÿæˆçš„è¯—æ­Œ
3. **ç”Ÿæˆå¥³ä¹¦å­—ç¬¦** - AIå°†è¯—æ­Œä¸­çš„æŸä¸ªå­—ç¬¦è½¬æ¢ä¸ºå¥³ä¹¦ç¬¦å·
4. **ç”¨æˆ·çŒœæµ‹** - å³ä¾§æ˜¾ç¤ºå¤šä¸ªé€‰é¡¹ï¼Œç”¨æˆ·çŒœæµ‹å­—ç¬¦å«ä¹‰
5. **é€‰æ‹©ç­”æ¡ˆ** - ç‚¹å‡»è®¤ä¸ºæ­£ç¡®çš„é€‰é¡¹

#### ç¬¬å››æ­¥ï¼šç»“æœå±•ç¤º
1. **æŸ¥çœ‹ç»“æœ** - æ˜¾ç¤ºçŒœæµ‹ç»“æœå’Œæ­£ç¡®ç­”æ¡ˆ
2. **æœ€ç»ˆå±•ç¤º** - è·³è½¬åˆ°æœ€ç»ˆå±•ç¤ºé¡µé¢ (`/frame_11`)
3. **æŸ¥çœ‹ç”Ÿæˆå†…å®¹**ï¼š
   - AIç”Ÿæˆçš„å¥³ä¹¦å­—ç¬¦å›¾ç‰‡
   - åŸå§‹ä¸Šä¼ çš„åª’ä½“æ–‡ä»¶
   - ç”Ÿæˆçš„è¯—æ­Œï¼ˆä¸­è‹±æ–‡å¯¹ç…§ï¼‰
   - ç”¨æˆ·ä¿¡æ¯

#### ç¬¬äº”æ­¥ï¼šå­˜å‚¨é€‰æ‹©
1. **é€‰æ‹©å­˜å‚¨** - ç”¨æˆ·é€‰æ‹©æ˜¯å¦å°†ç”Ÿæˆçš„å­—ç¬¦å­˜å‚¨åˆ°å…¬å…±å­—å…¸
2. **è®¿é—®å­—å…¸** - å¯ä»¥æµè§ˆæ‰€æœ‰å·²å­˜å‚¨çš„AIå¥³ä¹¦å­—ç¬¦
3. **é‡æ–°å¼€å§‹** - å¯ä»¥è¿”å›é¦–é¡µå¼€å§‹æ–°çš„ä½“éªŒ

### äº¤äº’ç‰¹ç‚¹
- **è‡ªåŠ¨åŒ–æµç¨‹** - å¤§éƒ¨åˆ†æ­¥éª¤è‡ªåŠ¨å®Œæˆï¼Œç”¨æˆ·åªéœ€å…³é”®é€‰æ‹©
- **å®æ—¶åé¦ˆ** - æ¯ä¸ªå¤„ç†æ­¥éª¤éƒ½æœ‰çŠ¶æ€æ˜¾ç¤º
- **åŒè¯­æ”¯æŒ** - æ‰€æœ‰å†…å®¹éƒ½æä¾›ä¸­è‹±æ–‡å¯¹ç…§
- **è§†è§‰ä½“éªŒ** - ç²¾ç¾çš„UIè®¾è®¡å’ŒåŠ¨ç”»æ•ˆæœ
- **çŸ¥è¯†ç§¯ç´¯** - ç”¨æˆ·è´¡çŒ®çš„å­—ç¬¦ä¼šæ·»åŠ åˆ°å…¬å…±å­—å…¸ä¸­

## ğŸ”„ é¡µé¢è·³è½¬é€»è¾‘

### ä¸»è¦é¡µé¢æµç¨‹

#### 1. é¦–é¡µ (`/` æˆ– `/see`) - `see.html`
**åŠŸèƒ½ï¼š** ç”¨æˆ·ä¸Šä¼ åª’ä½“æ–‡ä»¶ï¼ˆè§†é¢‘/å›¾ç‰‡ï¼‰çš„å…¥å£é¡µé¢

**é¡µé¢ç»„ä»¶ç»“æ„ï¼š**
- `page-body` - é¡µé¢ä¸»ä½“å®¹å™¨
- `page-container` - é¡µé¢å®¹å™¨
- `background` - èƒŒæ™¯å›¾ç‰‡å®¹å™¨
- `nvshu-overlay` - å¥³ä¹¦å›¾æ¡ˆè¦†ç›–å±‚
- `main-content` - ä¸»è¦å†…å®¹å®¹å™¨
  - `circles-container` - åœ†å½¢å®¹å™¨å¸ƒå±€
    - `video-recording-circle` - è§†é¢‘å½•åˆ¶åœ†å½¢å®¹å™¨
      - `recording-circle-container` - å½•åˆ¶åœ†å½¢å®¹å™¨
      - `dotted-border` - è™šçº¿è¾¹æ¡†
      - `camera-icon-container` - ç›¸æœºå›¾æ ‡å®¹å™¨
      - `recording-text` - å½•åˆ¶æç¤ºæ–‡æœ¬
      - `record-preview` - å½•åˆ¶é¢„è§ˆè§†é¢‘
      - `record-controls` - å½•åˆ¶æ§åˆ¶æŒ‰é’®
        - `start-record-btn` - å¼€å§‹å½•åˆ¶æŒ‰é’®
        - `stop-record-btn` - åœæ­¢å½•åˆ¶æŒ‰é’®
    - `file-upload-circle` - æ–‡ä»¶ä¸Šä¼ åœ†å½¢å®¹å™¨
      - `upload-circle-container` - ä¸Šä¼ åœ†å½¢å®¹å™¨
      - `upload-dotted-border` - ä¸Šä¼ è™šçº¿è¾¹æ¡†
      - `upload-icon-container` - ä¸Šä¼ å›¾æ ‡å®¹å™¨
      - `upload-text` - ä¸Šä¼ æç¤ºæ–‡æœ¬
      - `format-info` - æ ¼å¼ä¿¡æ¯æ–‡æœ¬
      - `file-input` - æ–‡ä»¶è¾“å…¥æ¡†
- `confirmation-page` - ç¡®è®¤é¡µé¢ï¼ˆéšè—çŠ¶æ€ï¼‰
  - `confirmation-background` - ç¡®è®¤é¡µé¢èƒŒæ™¯
  - `confirmation-nvshu-overlay` - ç¡®è®¤é¡µé¢å¥³ä¹¦è¦†ç›–å±‚
  - `confirmation-main-content` - ç¡®è®¤é¡µé¢ä¸»å†…å®¹
    - `privacy-statement` - éšç§å£°æ˜æ–‡æœ¬
    - `preview-container` - é¢„è§ˆå®¹å™¨
      - `preview-circle` - é¢„è§ˆåœ†å½¢
      - `preview-dotted-border` - é¢„è§ˆè™šçº¿è¾¹æ¡†
      - `video-preview` - è§†é¢‘é¢„è§ˆ
    - `action-buttons` - æ“ä½œæŒ‰é’®å®¹å™¨
      - `re-upload-button-container` - é‡æ–°ä¸Šä¼ æŒ‰é’®å®¹å™¨
        - `re-upload-btn` - é‡æ–°ä¸Šä¼ æŒ‰é’®
      - `confirm-button-container` - ç¡®è®¤æŒ‰é’®å®¹å™¨
        - `confirm-btn` - ç¡®è®¤æŒ‰é’®
- `privacy-policy-modal` - éšç§æ”¿ç­–å¼¹çª—ï¼ˆéšè—çŠ¶æ€ï¼‰
  - `modal-backdrop` - å¼¹çª—èƒŒæ™¯é®ç½©
  - `modal-content` - å¼¹çª—å†…å®¹
    - `modal-body` - å¼¹çª—ä¸»ä½“
      - `modal-title` - å¼¹çª—æ ‡é¢˜
      - `modal-text` - å¼¹çª—æ–‡æœ¬å†…å®¹
    - `modal-footer` - å¼¹çª—åº•éƒ¨
      - `agree-btn` - åŒæ„æŒ‰é’®

**ä¸»è¦äº¤äº’å…ƒç´ ï¼š**
- **å½•åˆ¶è§†é¢‘æŒ‰é’®** - è°ƒç”¨æ‘„åƒå¤´å½•åˆ¶è§†é¢‘
- **ä¸Šä¼ æ–‡ä»¶æŒ‰é’®** - é€‰æ‹©æœ¬åœ°æ–‡ä»¶ä¸Šä¼ 
- **ç¡®è®¤æŒ‰é’®** - è·³è½¬åˆ°æ€è€ƒé¡µé¢

**JavaScripté€»è¾‘ï¼š**
- `see.js` å¤„ç†æ–‡ä»¶ä¸Šä¼ å’Œå½•åˆ¶
- æ”¯æŒæ‹–æ‹½ä¸Šä¼ 
- ä¸Šä¼ æˆåŠŸåè°ƒç”¨ `confirm_video()` å‡½æ•°è·³è½¬åˆ° `/think?media_url=xxx`

**æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼š**
- è§†é¢‘ï¼šMP4, WebM
- å›¾ç‰‡ï¼šPNG, JPG, JPEG
- æ–‡ä»¶å¤§å°é™åˆ¶ï¼š5MB

#### 2. æ€è€ƒé¡µé¢ (`/think`) - `think.html`
**åŠŸèƒ½ï¼š** AIåˆ†æåª’ä½“å¹¶ç”Ÿæˆè¯—æ­Œçš„ä¸­é—´å¤„ç†é¡µé¢

**é¡µé¢ç»„ä»¶ç»“æ„ï¼š**
- `background` - èƒŒæ™¯å›¾ç‰‡å®¹å™¨
- `main-container` - ä¸»å†…å®¹å®¹å™¨
- `layout-row` - å·¦å³å¸ƒå±€è¡Œ
- `left-panel` - å·¦ä¾§é¢æ¿
  - `left-title` - "Observation"æ ‡é¢˜
  - `left-media-wrapper` - åª’ä½“åŒ…è£…å™¨
    - `media-circle-bottom` - åº•å±‚è§†é¢‘åœ†å½¢
    - `media-element` - è§†é¢‘/å›¾ç‰‡å…ƒç´ 
    - `media-circle-overlay` - è¦†ç›–åœ†å½¢
    - `left-content` - åŠ¨æ€å†…å®¹æ˜¾ç¤ºåŒºåŸŸ
- `right-panel` - å³ä¾§é¢æ¿
  - `right-title` - "Process Status"æ ‡é¢˜
  - `status-list` - çŠ¶æ€åˆ—è¡¨å®¹å™¨

**è‡ªåŠ¨å¤„ç†æµç¨‹ï¼š**
1. **åª’ä½“åˆ†æ** â†’ è°ƒç”¨ `/describe_video` API
2. **æŸ¥æ‰¾ç›¸ä¼¼è¯—æ­Œ** â†’ è°ƒç”¨ `/find_similar_poems` API  
3. **ç”Ÿæˆæ–°è¯—æ­Œ** â†’ è°ƒç”¨ `/generate_poem` API
4. **è‡ªåŠ¨è·³è½¬** â†’ è·³è½¬åˆ° `/guess?poem=xxx`

**JavaScripté€»è¾‘ï¼š**
- `think.js` æ§åˆ¶æ•´ä¸ªAIå¤„ç†æµç¨‹
- æ¯ä¸ªæ­¥éª¤å®Œæˆåè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€æ­¥
- ä½¿ç”¨æ‰“å­—æœºæ•ˆæœæ˜¾ç¤ºå¤„ç†ç»“æœ
- æœ€åè‡ªåŠ¨è·³è½¬åˆ°çŒœæµ‹é¡µé¢

#### 3. çŒœæµ‹é¡µé¢ (`/guess`) - `guess.html`
**åŠŸèƒ½ï¼š** ç”¨æˆ·çŒœæµ‹AIç”Ÿæˆçš„å¥³ä¹¦å­—ç¬¦å«ä¹‰

**é¡µé¢ç»„ä»¶ç»“æ„ï¼š**
- `page-body` - é¡µé¢ä¸»ä½“å®¹å™¨
- `background` - èƒŒæ™¯å›¾ç‰‡å®¹å™¨
- `header` - é¡µé¢å¤´éƒ¨
  - `consensus-title` - "Consensus Reached!"æ ‡é¢˜ï¼ˆéšè—çŠ¶æ€ï¼‰
- `main-content` - ä¸»è¦å†…å®¹å®¹å™¨
  - `left-panel` - å·¦ä¾§é¢æ¿ï¼ˆSpeakerï¼‰
    - `speaker-circle-wrapper` - è¯´è¯è€…åœ†å½¢åŒ…è£…å™¨
    - `speaker-circle` - è¯´è¯è€…åœ†å½¢å®¹å™¨
    - `original-text` - åŸå§‹è¯—æ­Œæ–‡æœ¬æ˜¾ç¤ºåŒºåŸŸ
    - `speaker-label` - "Speaker"æ ‡ç­¾
  - `center-panel` - ä¸­é—´é¢æ¿
    - `encoding-text` - ç¼–ç æç¤ºæ–‡æœ¬
      - `encoding-title` - "Encoding..."æ ‡é¢˜
      - `encoding-subtitle` - ç¼–ç å‰¯æ ‡é¢˜
    - `guessing-text` - çŒœæµ‹æç¤ºæ–‡æœ¬
      - `guessing-title` - "Guessing..."æ ‡é¢˜
      - `guessing-subtitle` - çŒœæµ‹å‰¯æ ‡é¢˜
    - `loading` - åŠ è½½æç¤ºæ–‡æœ¬
    - `char-image-container` - å­—ç¬¦å›¾ç‰‡å®¹å™¨
    - `button-container` - æŒ‰é’®å®¹å™¨
  - `right-panel` - å³ä¾§é¢æ¿ï¼ˆListenerï¼‰
    - `listener-circle-wrapper` - å¬è€…åœ†å½¢åŒ…è£…å™¨
    - `listener-circle` - å¬è€…åœ†å½¢å®¹å™¨
    - `revealing-text` - æ­ç¤ºæ–‡æœ¬æ˜¾ç¤ºåŒºåŸŸ
    - `listener-label` - "Listener"æ ‡ç­¾

**é¡µé¢å¸ƒå±€ï¼š**
- **å·¦ä¾§åœ†å½¢** - æ˜¾ç¤ºåŸå§‹è¯—æ­Œ
- **ä¸­é—´åŒºåŸŸ** - æ˜¾ç¤ºç”Ÿæˆçš„å¥³ä¹¦å­—ç¬¦
- **å³ä¾§åœ†å½¢** - æ˜¾ç¤ºçŒœæµ‹é€‰é¡¹

**ä¸»è¦åŠŸèƒ½ï¼š**
- æ˜¾ç¤ºåŸå§‹è¯—æ­Œ
- ç”Ÿæˆå¥³ä¹¦å­—ç¬¦ï¼ˆè°ƒç”¨ `/generate_char` APIï¼‰
- æ˜¾ç¤ºå¤šä¸ªçŒœæµ‹é€‰é¡¹
- ç”¨æˆ·é€‰æ‹©æ­£ç¡®ç­”æ¡ˆ

**è·³è½¬é€»è¾‘ï¼š**
- ç”¨æˆ·é€‰æ‹©çŒœæµ‹å â†’ è·³è½¬åˆ°ç»“æœé¡µé¢

#### 4. ç»“æœé¡µé¢ (`/get_result`) - `result.html`
**åŠŸèƒ½ï¼š** æ˜¾ç¤ºæœ€ç»ˆç»“æœ

**é¡µé¢ç»„ä»¶ç»“æ„ï¼š**
- `page-body` - é¡µé¢ä¸»ä½“å®¹å™¨
- `background` - èƒŒæ™¯å›¾ç‰‡å®¹å™¨
- `main-container` - ä¸»å®¹å™¨
  - `left-panel` - å·¦ä¾§é¢æ¿
    - `media-container` - åª’ä½“å®¹å™¨
      - `video-circle` - è§†é¢‘åœ†å½¢å®¹å™¨
      - `video-element` - è§†é¢‘å…ƒç´ 
      - `char-overlay` - å­—ç¬¦è¦†ç›–å±‚
      - `char-image` - å­—ç¬¦å›¾ç‰‡
      - `char-translate` - å­—ç¬¦ç¿»è¯‘æ–‡æœ¬
      - `top-overlay` - é¡¶éƒ¨è¦†ç›–å±‚
      - `spacer` - å ä½å…ƒç´ 
    - `dimensions-display` - 3Då°ºå¯¸æ˜¾ç¤º
      - `dimensions-text` - å°ºå¯¸æ–‡æœ¬
      - `dimensions-title` - å°ºå¯¸æ ‡é¢˜
  - `right-panel` - å³ä¾§é¢æ¿
    - `content-wrapper` - å†…å®¹åŒ…è£…å™¨
      - `congratulations-title` - ç¥è´ºæ ‡é¢˜
      - `success-message` - æˆåŠŸæ¶ˆæ¯
      - `name-input-section` - å§“åè¾“å…¥åŒºåŸŸ
        - `name-prompt` - å§“åæç¤º
        - `name-input` - å§“åè¾“å…¥æ¡†
        - `save-button` - ä¿å­˜æŒ‰é’®

**è·³è½¬é€»è¾‘ï¼š**
- æ˜¾ç¤ºç»“æœå â†’ è·³è½¬åˆ°æœ€ç»ˆå±•ç¤ºé¡µé¢

#### 5. æœ€ç»ˆå±•ç¤ºé¡µé¢ (`/frame_11`) - `frame_11.html`
**åŠŸèƒ½ï¼š** å±•ç¤ºç”Ÿæˆçš„AIå¥³ä¹¦å­—ç¬¦å’Œç›¸å…³ä¿¡æ¯

**é¡µé¢ç»„ä»¶ç»“æ„ï¼š**
- `page-body` - é¡µé¢ä¸»ä½“å®¹å™¨
- `background` - èƒŒæ™¯å›¾ç‰‡å®¹å™¨
- `main-container` - ä¸»å®¹å™¨ï¼ˆå¸¦è™šçº¿è¾¹æ¡†ï¼‰
  - `content-wrapper` - å†…å®¹åŒ…è£…å™¨
    - `background-strip` - èƒŒæ™¯è£…é¥°æ¡
    - `left-column` - å·¦ä¾§æ–‡æœ¬åˆ—
      - `character-info` - å­—ç¬¦ä¿¡æ¯
        - `character-title` - å­—ç¬¦æ ‡é¢˜
      - `creator-info` - åˆ›å»ºè€…ä¿¡æ¯
        - `creator-text` - åˆ›å»ºè€…æ–‡æœ¬
      - `poem-info` - è¯—æ­Œä¿¡æ¯
        - `poem-label` - è¯—æ­Œæ ‡ç­¾
        - `poem-text` - è¯—æ­Œæ–‡æœ¬
        - `poem-eng-text` - è‹±æ–‡è¯—æ­Œæ–‡æœ¬
    - `right-column` - å³ä¾§åœ†å½¢åˆ—
      - `ai-character-circle` - AIå­—ç¬¦åœ†å½¢
        - `character-background` - å­—ç¬¦èƒŒæ™¯
        - `character-image` - å­—ç¬¦å›¾ç‰‡
      - `video-wrapper` - è§†é¢‘åŒ…è£…å™¨
        - `video-circle` - è§†é¢‘åœ†å½¢
        - `video-element` - è§†é¢‘å…ƒç´ 
        - `video-overlay` - è§†é¢‘è¦†ç›–å±‚
      - `original-poem-circle` - åŸå§‹è¯—æ­Œåœ†å½¢
        - `poem-display` - è¯—æ­Œæ˜¾ç¤º
        - `poem-eng-display` - è‹±æ–‡è¯—æ­Œæ˜¾ç¤º
- `bottom-section` - åº•éƒ¨åŒºåŸŸ
  - `bottom-content` - åº•éƒ¨å†…å®¹
    - `storage-question` - å­˜å‚¨é—®é¢˜
      - `question-text` - é—®é¢˜æ–‡æœ¬
      - `storage-options` - å­˜å‚¨é€‰é¡¹
        - `yes-option` - æ˜¯é€‰é¡¹
        - `no-option` - å¦é€‰é¡¹
    - `action-buttons` - æ“ä½œæŒ‰é’®
      - `save-image-button` - ä¿å­˜å›¾ç‰‡æŒ‰é’®
      - `dictionary-button` - å­—å…¸æŒ‰é’®
      - `share-section` - åˆ†äº«åŒºåŸŸ
        - `share-label` - åˆ†äº«æ ‡ç­¾
        - `wechat-share` - å¾®ä¿¡åˆ†äº«
        - `instagram-share` - Instagramåˆ†äº«
        - `copy-link` - å¤åˆ¶é“¾æ¥

**é¡µé¢å†…å®¹ï¼š**
- ç”Ÿæˆçš„å­—ç¬¦å›¾ç‰‡
- åŸå§‹è§†é¢‘/å›¾ç‰‡
- è¯—æ­Œå†…å®¹ï¼ˆä¸­è‹±æ–‡ï¼‰
- ç”¨æˆ·ä¿¡æ¯

**äº¤äº’åŠŸèƒ½ï¼š**
- **å­˜å‚¨é€‰æ‹©** - ç”¨æˆ·é€‰æ‹©æ˜¯å¦å­˜å‚¨åˆ°å­—å…¸
- **æˆªå›¾åŠŸèƒ½** - å¯ä»¥ä¿å­˜å½“å‰é¡µé¢ä¸ºå›¾ç‰‡

**è·³è½¬é€»è¾‘ï¼š**
- é€‰æ‹©å­˜å‚¨ â†’ è°ƒç”¨ `/add_to_dictionary` API
- å¯ä»¥è®¿é—®å­—å…¸ â†’ è·³è½¬åˆ°å­—å…¸é¡µé¢

#### 6. å­—å…¸é¡µé¢ (`/dictionary`) - `dictionary.html`
**åŠŸèƒ½ï¼š** æµè§ˆæ‰€æœ‰å·²å­˜å‚¨çš„AIå¥³ä¹¦å­—ç¬¦

**é¡µé¢ç»„ä»¶ç»“æ„ï¼š**
- `page-body` - é¡µé¢ä¸»ä½“å®¹å™¨
- `background` - èƒŒæ™¯å›¾ç‰‡å®¹å™¨
- `main-container` - ä¸»å®¹å™¨
  - `header-section` - å¤´éƒ¨åŒºåŸŸ
    - `page-title` - é¡µé¢æ ‡é¢˜ "NÃ¼shu Character Dictionary"
    - `page-subtitle` - é¡µé¢å‰¯æ ‡é¢˜
  - `controls-section` - æ§åˆ¶åŒºåŸŸ
    - `search-input` - æœç´¢è¾“å…¥æ¡†
    - `pagination-controls` - åˆ†é¡µæ§åˆ¶
      - `prev-button` - ä¸Šä¸€é¡µæŒ‰é’®
      - `page-info` - é¡µé¢ä¿¡æ¯æ˜¾ç¤º
      - `next-button` - ä¸‹ä¸€é¡µæŒ‰é’®
  - `dictionary-grid` - å­—å…¸ç½‘æ ¼å®¹å™¨
    - `loading-message` - åŠ è½½æ¶ˆæ¯

**ä¸»è¦åŠŸèƒ½ï¼š**
- **æœç´¢åŠŸèƒ½** - è°ƒç”¨ `/search_dictionary` API
- **åˆ†é¡µæµè§ˆ** - æ˜¾ç¤ºå­—å…¸å†…å®¹
- **å­—ç¬¦å±•ç¤º** - æ˜¾ç¤ºå­—ç¬¦å›¾ç‰‡å’Œå«ä¹‰

**äº¤äº’ï¼š**
- å¯ä»¥è¿”å›é¦–é¡µé‡æ–°å¼€å§‹æµç¨‹

## APIç«¯ç‚¹æ˜ å°„

| å‰ç«¯è°ƒç”¨ | åç«¯è·¯ç”± | æ–¹æ³• | åŠŸèƒ½æè¿° |
|---------|---------|------|---------|
| `/upload` | `POST /upload` | POST | æ–‡ä»¶ä¸Šä¼  |
| `/describe_video` | `POST /describe_video` | POST | åª’ä½“åˆ†æ |
| `/find_similar_poems` | `POST /find_similar_poems` | POST | æŸ¥æ‰¾ç›¸ä¼¼è¯—æ­Œ |
| `/generate_poem` | `POST /generate_poem` | POST | ç”Ÿæˆæ–°è¯—æ­Œ |
| `/replace_with_created_char` | `POST /replace_with_created_char` | POST | æ›¿æ¢å­—ç¬¦ |
| `/generate_char` | `POST /generate_char` | POST | ç”Ÿæˆå¥³ä¹¦å­—ç¬¦ |
| `/save_user_name` | `POST /save_user_name` | POST | ä¿å­˜ç”¨æˆ·å |
| `/save_storage_preference` | `POST /save_storage_preference` | POST | ä¿å­˜å­˜å‚¨åå¥½ |
| `/get_dictionary` | `GET /get_dictionary` | GET | è·å–å­—å…¸æ•°æ® |
| `/search_dictionary` | `GET /search_dictionary` | GET | æœç´¢å­—å…¸ |
| `/add_to_dictionary` | `POST /add_to_dictionary` | POST | æ·»åŠ åˆ°å­—å…¸ |

## æ•°æ®æµå‘

### Sessionæ•°æ®ä¼ é€’

åº”ç”¨ä½¿ç”¨Flask sessionåœ¨ä¸åŒé¡µé¢é—´ä¼ é€’æ•°æ®ï¼š

| æ•°æ®é”® | ç±»å‹ | æè¿° |
|--------|------|------|
| `media_url` | String | ä¸Šä¼ çš„åª’ä½“æ–‡ä»¶URL |
| `original_media_url` | String | åŸå§‹åª’ä½“æ–‡ä»¶URL |
| `poem` | String | ç”Ÿæˆçš„è¯—æ­Œ |
| `poem_eng` | String | è‹±æ–‡è¯—æ­Œ |
| `char_img_path` | String | ç”Ÿæˆçš„å­—ç¬¦å›¾ç‰‡è·¯å¾„ |
| `char_translate` | String | å­—ç¬¦ç¿»è¯‘ |
| `char_3dim` | Array | å­—ç¬¦3Dæ•°æ® |
| `user_name` | String | ç”¨æˆ·å |
| `storage_preference` | String | å­˜å‚¨åå¥½ |

### URLå‚æ•°ä¼ é€’

é¡µé¢é—´é€šè¿‡URLå‚æ•°ä¼ é€’æ•°æ®ï¼š

| å‚æ•°å | æè¿° | ç¤ºä¾‹ |
|--------|------|------|
| `media_url` | åª’ä½“æ–‡ä»¶URL | `/think?media_url=/uploads/xxx.mp4` |
| `original_media_url` | åŸå§‹åª’ä½“URL | `/think?original_media_url=/uploads/xxx.mp4` |
| `poem` | è¯—æ­Œå†…å®¹ | `/guess?poem=æ±Ÿæ°¸å¥³ä¹¦å¥‡` |

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai_nvshu/
â”œâ”€â”€ ğŸ“„ app.py                    # Flaskä¸»åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ config.py                 # é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ ai_nvshu_functions.py     # AIæ ¸å¿ƒåŠŸèƒ½å‡½æ•°
â”œâ”€â”€ ğŸ“„ utils.py                  # å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“„ word_vector_manager.py    # è¯å‘é‡ç®¡ç†å™¨
â”œâ”€â”€ ğŸ“„ media_analysis.py         # åª’ä½“åˆ†ææ¨¡å—
â”œâ”€â”€ ğŸ“„ process_video.py          # è§†é¢‘å¤„ç†å·¥å…·
â”œâ”€â”€ ğŸ“„ dict_io.py               # å­—å…¸è¯»å†™æ“ä½œ
â”œâ”€â”€ ğŸ“„ requirements.txt          # å®Œæ•´ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ ğŸ“„ requirements-minimal.txt  # æœ€å°ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ ğŸ“„ .env                     # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ ğŸ“ templates/               # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ ğŸ“„ landingpage.html     # é¦–é¡µ
â”‚   â”œâ”€â”€ ğŸ“„ see.html            # ä¸Šä¼ é¡µé¢
â”‚   â”œâ”€â”€ ğŸ“„ think.html          # æ€è€ƒé¡µé¢
â”‚   â”œâ”€â”€ ğŸ“„ guess.html          # çŒœæµ‹é¡µé¢
â”‚   â”œâ”€â”€ ğŸ“„ result.html         # ç»“æœé¡µé¢
â”‚   â”œâ”€â”€ ğŸ“„ frame_11.html       # æœ€ç»ˆå±•ç¤ºé¡µé¢
â”‚   â”œâ”€â”€ ğŸ“„ dictionary.html     # å­—å…¸é¡µé¢
â”‚   â””â”€â”€ ğŸ“„ about.html          # å…³äºé¡µé¢
â”œâ”€â”€ ğŸ“ static/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ ğŸ“ css/               # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ js/                # JavaScriptæ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ images/            # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ ğŸ“ fonts/             # å­—ä½“æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“ nvshu_images/      # å¥³ä¹¦å­—ç¬¦å›¾ç‰‡
â”œâ”€â”€ ğŸ“ knowledge_base/         # çŸ¥è¯†åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ data.json          # å¥³ä¹¦æ•°æ®
â”‚   â”œâ”€â”€ ğŸ“„ simple.pkl         # ç®€åŒ–å¥³ä¹¦å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ word_vectors.pkl   # è¯å‘é‡æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“ nvshu_comp/        # å¥³ä¹¦ç»„ä»¶å›¾ç‰‡
â”œâ”€â”€ ğŸ“ models/                 # AIæ¨¡å‹æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“ bert-base-chinese/ # BERTä¸­æ–‡æ¨¡å‹
â”œâ”€â”€ ğŸ“ uploads/                # ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
â””â”€â”€ ğŸ“ knowledge_tmp/          # ä¸´æ—¶çŸ¥è¯†åº“æ–‡ä»¶
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°å¼€å‘éƒ¨ç½²
```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd ai_nvshu

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate

# 3. å®‰è£…ä¾èµ–
pip install -r requirements-minimal.txt

# 4. é…ç½®ç¯å¢ƒå˜é‡
echo "ZHIPU_API_KEY=your_api_key" > .env

# 5. è¿è¡Œåº”ç”¨
python app.py
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### ä½¿ç”¨ Gunicorn + Nginx
```bash
# 1. å®‰è£… Gunicorn
pip install gunicorn

# 2. å¯åŠ¨ Gunicorn
gunicorn -w 4 -b 127.0.0.1:8000 app:app

# 3. é…ç½® Nginx (å‚è€ƒ DEPLOYMENT.md)
```

#### ä½¿ç”¨ Docker (æ¨è)
```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY requirements-minimal.txt .
RUN pip install -r requirements-minimal.txt

COPY . .
EXPOSE 5001

CMD ["python", "app.py"]
```

```bash
# æ„å»ºå’Œè¿è¡Œ
docker build -t ai-nvshu .
docker run -p 5001:5001 -e ZHIPU_API_KEY=your_key ai-nvshu
```

### äº‘æœåŠ¡éƒ¨ç½²

#### Vercel éƒ¨ç½²
```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# éƒ¨ç½²
vercel --prod
```

#### Railway éƒ¨ç½²
```bash
# è¿æ¥ GitHub ä»“åº“
# è®¾ç½®ç¯å¢ƒå˜é‡: ZHIPU_API_KEY
# è‡ªåŠ¨éƒ¨ç½²
```

è¯¦ç»†éƒ¨ç½²è¯´æ˜è¯·å‚è€ƒ [DEPLOYMENT.md](DEPLOYMENT.md)

### ğŸ“¦ ä¾èµ–åŒ…è¯´æ˜

| æ–‡ä»¶ | ç”¨é€” | åŒ…æ•°é‡ | è¯´æ˜ |
|------|------|--------|------|
| `requirements-minimal.txt` | **æ¨èä½¿ç”¨** | ~35ä¸ª | åŒ…å«æ‰€æœ‰åŠŸèƒ½ï¼Œå»é™¤éå¿…è¦åŒ… |
| `requirements.txt` | å®Œæ•´ç‰ˆæœ¬ | ~200ä¸ª | åŒ…å«æ‰€æœ‰ä¾èµ–ï¼ŒåŒ…æ‹¬å¼€å‘å·¥å…· |

**å·²åˆ é™¤çš„éå¿…è¦åŒ…ï¼š**
- Jupyterç›¸å…³ï¼šjupyter, jupyterlab, ipython, ipykernelç­‰
- å¼€å‘å·¥å…·ï¼šdebugpy, ruff, livereload
- å…¶ä»–æ¡†æ¶ï¼šfastapi, gradio, uvicorn
- æ•°æ®ç§‘å­¦ï¼špandas, matplotlibç›¸å…³
- å„ç§éªŒè¯å™¨å’Œè§£æå™¨

**ä¿ç•™çš„æ ¸å¿ƒåŠŸèƒ½åŒ…ï¼š**
- âœ… Webæ¡†æ¶ï¼šFlask + flask-cors
- âœ… AI/MLï¼šPyTorch + Transformers + scikit-learn
- âœ… AIæœåŠ¡ï¼šzhipuai (æ™ºè°±AI SDK)
- âœ… å›¾åƒå¤„ç†ï¼šOpenCV + PIL + MoviePy
- âœ… æ–‡æœ¬å¤„ç†ï¼šjieba + gensim + googletrans
- âœ… ç½‘ç»œè¯·æ±‚ï¼šrequests + httpx
- âœ… é…ç½®ç®¡ç†ï¼špython-dotenv

## æŠ€æœ¯æ ˆ

- **åç«¯ï¼š** Flask (Python)
- **å‰ç«¯ï¼š** HTML5, CSS3, JavaScript
- **æ ·å¼ï¼š** Tailwind CSS
- **åŠ¨ç”»ï¼š** GSAP
- **AIåŠŸèƒ½ï¼š** è‡ªå®šä¹‰AIå‡½æ•°æ¨¡å—

## è¿è¡Œè¯´æ˜

1. å®‰è£…ä¾èµ–ï¼š
```bash
pip install -r requirements.txt
```

2. è¿è¡Œåº”ç”¨ï¼š
```bash
python app.py
```

3. è®¿é—®åº”ç”¨ï¼š
```
http://localhost:5000
```

## å¼€å‘æ¨¡å¼

åº”ç”¨æ”¯æŒè°ƒè¯•æ¨¡å¼ï¼Œåœ¨ `app.py` ä¸­è®¾ç½®ï¼š
```python
app.run(debug=True)  # å¯ç”¨è°ƒè¯•æ¨¡å¼
```

è°ƒè¯•æ¨¡å¼ä¸‹ä¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œè·³è¿‡å®é™…çš„AIå¤„ç†è¿‡ç¨‹ã€‚

## ğŸ“‹ æ³¨æ„äº‹é¡¹

- ç¡®ä¿ä¸Šä¼ ç›®å½•å­˜åœ¨ä¸”æœ‰å†™å…¥æƒé™
- æ–‡ä»¶å¤§å°é™åˆ¶ä¸º20MB
- æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼šMP4, WebM, PNG, JPG, JPEG
- åº”ç”¨ä¼šè‡ªåŠ¨æ¸…ç†è¶…è¿‡24å°æ—¶çš„ä¸´æ—¶æ–‡ä»¶
- é¦–æ¬¡è¿è¡Œéœ€è¦ä¸‹è½½BERTæ¨¡å‹ï¼Œè¯·ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®
1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘è§„èŒƒ
- éµå¾ª PEP 8 Python ä»£ç è§„èŒƒ
- æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¡®ä¿ä»£ç é€šè¿‡æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [æ™ºè°±AI](https://open.bigmodel.cn/) - æä¾›AIæ¨¡å‹æœåŠ¡
- [Hugging Face](https://huggingface.co/) - æä¾›é¢„è®­ç»ƒæ¨¡å‹
- [Flask](https://flask.palletsprojects.com/) - Webæ¡†æ¶
- [PyTorch](https://pytorch.org/) - æ·±åº¦å­¦ä¹ æ¡†æ¶

## ğŸ“ è”ç³»æˆ‘ä»¬

- é¡¹ç›®ä¸»é¡µ: [GitHub Repository]
- é—®é¢˜åé¦ˆ: [Issues]
- é‚®ç®±: [your-email@example.com]

---

**AIå¥³ä¹¦** - è®©ä¼ ç»Ÿæ–‡åŒ–åœ¨AIæ—¶ä»£ç„•å‘æ–°çš„ç”Ÿå‘½åŠ› âœ¨

## ğŸ› è°ƒè¯•æŒ‡å—

### AIæœåŠ¡é—®é¢˜è°ƒè¯•

å¦‚æœé‡åˆ°AIè¯†åˆ«å¤±è´¥çš„é”™è¯¯ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤è°ƒè¯•ï¼š

#### 1. è¿è¡ŒAIæœåŠ¡æµ‹è¯•è„šæœ¬
```bash
python debug_ai.py
```

è¿™ä¸ªè„šæœ¬ä¼šæµ‹è¯•ï¼š
- é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½
- æ™ºè°±AI APIæ˜¯å¦å¯ç”¨
- è§†è§‰APIæ˜¯å¦æ­£å¸¸å·¥ä½œ

#### 2. æ£€æŸ¥ç¯å¢ƒå˜é‡
ç¡®ä¿ `.env` æ–‡ä»¶ä¸­è®¾ç½®äº†æ­£ç¡®çš„APIå¯†é’¥ï¼š
```bash
ZHIPU_API_KEY=your-api-key-here
```

#### 3. ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®æ¨¡å¼
å¦‚æœAIæœåŠ¡ä¸å¯ç”¨ï¼Œå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼š
```bash
export USE_MOCK_AI=true
python app.py
```

#### 4. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
å¯ç”¨è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼š
```python
# åœ¨ app.py ä¸­è®¾ç½®
app.run(debug=True)
```

#### 5. å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

| é”™è¯¯ç±»å‹ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|---------|---------|
| `Media recognition failed` | AI APIè°ƒç”¨å¤±è´¥ | æ£€æŸ¥APIå¯†é’¥å’Œç½‘ç»œè¿æ¥ |
| `File not found` | æ–‡ä»¶è·¯å¾„é”™è¯¯ | æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™ |
| `Invalid file path` | è·¯å¾„å®‰å…¨é—®é¢˜ | æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åœ¨å…è®¸ç›®å½•å†… |
| `TypeError: not all arguments converted` | æ—¥å¿—æ ¼å¼åŒ–é”™è¯¯ | å·²ä¿®å¤ï¼Œæ›´æ–°ä»£ç  |
| `SSL: UNEXPECTED_EOF` | ç½‘ç»œè¿æ¥ä¸ç¨³å®š | è‡ªåŠ¨é‡è¯•ï¼Œæˆ–ä½¿ç”¨æ¼”ç¤ºæ•°æ®ç»§ç»­ä½“éªŒ |

#### 6. ç”¨æˆ·ä½“éªŒæ”¹è¿›

**é”™è¯¯å¤„ç†ä¼˜åŒ–ï¼š**
- **è‡ªåŠ¨é‡è¯•æœºåˆ¶** - AIæœåŠ¡å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•3æ¬¡
- **å‹å¥½é”™è¯¯æç¤º** - æ˜¾ç¤ºå…·ä½“é”™è¯¯åŸå› å’Œè§£å†³å»ºè®®
- **æ¼”ç¤ºæ•°æ®æ¨¡å¼** - å½“AIæœåŠ¡ä¸å¯ç”¨æ—¶ï¼Œæä¾›æ¼”ç¤ºæ•°æ®ç»§ç»­ä½“éªŒ
- **è¶…æ—¶å¤„ç†** - 5ç§’åæ˜¾ç¤ºè·³è¿‡é€‰é¡¹ï¼Œé¿å…ç”¨æˆ·é•¿æ—¶é—´ç­‰å¾…
- **é‡è¯•æŒ‰é’®** - å…è®¸ç”¨æˆ·æ‰‹åŠ¨é‡è¯•å¤±è´¥çš„è¯·æ±‚

**åŠ è½½çŠ¶æ€ä¼˜åŒ–ï¼š**
- **è¿›åº¦æç¤º** - æ˜¾ç¤ºå½“å‰å¤„ç†æ­¥éª¤
- **çŠ¶æ€åˆ‡æ¢** - æ¸…æ™°æ˜¾ç¤ºåŠ è½½ã€é”™è¯¯ã€æˆåŠŸçŠ¶æ€
- **éé˜»å¡ä½“éªŒ** - å³ä½¿AIæœåŠ¡å¤±è´¥ï¼Œç”¨æˆ·ä»å¯ç»§ç»­ä½“éªŒ

### æ—¥å¿—æŸ¥çœ‹
åº”ç”¨æ—¥å¿—ä¿å­˜åœ¨ `app.log` æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š
```bash
tail -f app.log
```

## ğŸ› ï¸ æŠ€æœ¯ç»†èŠ‚

### å¼€å‘æ¨¡å¼

åº”ç”¨æ”¯æŒè°ƒè¯•æ¨¡å¼ï¼Œåœ¨ `app.py` ä¸­è®¾ç½®ï¼š
```python
app.run(debug=True)  # å¯ç”¨è°ƒè¯•æ¨¡å¼
```

è°ƒè¯•æ¨¡å¼ä¸‹ä¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œè·³è¿‡å®é™…çš„AIå¤„ç†è¿‡ç¨‹ã€‚

### æ–‡ä»¶ç»“æ„

```
ai_nvshu/
â”œâ”€â”€ app.py                 # ä¸»åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ api.py            # APIè·¯ç”±
â”‚   â””â”€â”€ debug.py          # è°ƒè¯•è·¯ç”±
â”œâ”€â”€ templates/            # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ see.html          # é¦–é¡µ
â”‚   â”œâ”€â”€ think.html        # æ€è€ƒé¡µé¢
â”‚   â”œâ”€â”€ guess.html        # çŒœæµ‹é¡µé¢
â”‚   â”œâ”€â”€ result.html       # ç»“æœé¡µé¢
â”‚   â”œâ”€â”€ frame_11.html     # æœ€ç»ˆå±•ç¤ºé¡µé¢
â”‚   â””â”€â”€ dictionary.html   # å­—å…¸é¡µé¢
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ js/              # JavaScriptæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ see.js       # é¦–é¡µé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ think.js     # æ€è€ƒé¡µé¢é€»è¾‘
â”‚   â”‚   â””â”€â”€ guess.js     # çŒœæµ‹é¡µé¢é€»è¾‘
â”‚   â”œâ”€â”€ css/             # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ images/          # å›¾ç‰‡èµ„æº
â””â”€â”€ knowledge_base/      # çŸ¥è¯†åº“æ–‡ä»¶
```

### æŠ€æœ¯æ ˆ

- **åç«¯ï¼š** Flask (Python)
- **å‰ç«¯ï¼š** HTML5, CSS3, JavaScript
- **æ ·å¼ï¼š** Tailwind CSS
- **åŠ¨ç”»ï¼š** GSAP
- **AIåŠŸèƒ½ï¼š** è‡ªå®šä¹‰AIå‡½æ•°æ¨¡å—

### æ•°æ®æµå‘

#### Sessionæ•°æ®ä¼ é€’

åº”ç”¨ä½¿ç”¨Flask sessionåœ¨ä¸åŒé¡µé¢é—´ä¼ é€’æ•°æ®ï¼š

| æ•°æ®é”® | ç±»å‹ | æè¿° |
|--------|------|------|
| `media_url` | String | ä¸Šä¼ çš„åª’ä½“æ–‡ä»¶URL |
| `original_media_url` | String | åŸå§‹åª’ä½“æ–‡ä»¶URL |
| `poem` | String | ç”Ÿæˆçš„è¯—æ­Œ |
| `poem_eng` | String | è‹±æ–‡è¯—æ­Œ |
| `char_img_path` | String | ç”Ÿæˆçš„å­—ç¬¦å›¾ç‰‡è·¯å¾„ |
| `char_translate` | String | å­—ç¬¦ç¿»è¯‘ |
| `char_3dim` | Array | å­—ç¬¦3Dæ•°æ® |
| `user_name` | String | ç”¨æˆ·å |
| `storage_preference` | String | å­˜å‚¨åå¥½ |

#### URLå‚æ•°ä¼ é€’

é¡µé¢é—´é€šè¿‡URLå‚æ•°ä¼ é€’æ•°æ®ï¼š

| å‚æ•°å | æè¿° | ç¤ºä¾‹ |
|--------|------|------|
| `media_url` | åª’ä½“æ–‡ä»¶URL | `/think?media_url=/uploads/xxx.mp4` |
| `original_media_url` | åŸå§‹åª’ä½“URL | `/think?original_media_url=/uploads/xxx.mp4` |
| `poem` | è¯—æ­Œå†…å®¹ | `/guess?poem=æ±Ÿæ°¸å¥³ä¹¦å¥‡` |
